const t=new class{constructor(){this.currentLang=this.detectLanguage(),this.translations=window.translations||{}}detectLanguage(){const t=navigator.language||navigator.userLanguage;return t.startsWith("zh")?"zh":t.startsWith("ja")?"ja":t.startsWith("en")?"en":"zh"}setLanguage(t){this.translations[t]&&(this.currentLang=t,localStorage.setItem("preferredLang",t),this.updatePageContent(),this.updateLangButtons())}t(t){const e=t.split(".");let n=this.translations[this.currentLang];for(const r of e){if(!n||void 0===n[r])return t;n=n[r]}return n}tArray(t){const e=this.t(t);return Array.isArray(e)?e:[]}tObject(t){const e=this.t(t);return"object"!=typeof e||Array.isArray(e)?{}:e}updatePageContent(){document.querySelectorAll("[data-i18n]").forEach(t=>{const e=t.getAttribute("data-i18n");t.textContent=this.t(e)}),this.updateProjectsPage(),this.updateAboutPage(),this.updateFuturePage(),this.updateContactPage()}updateProjectsPage(){const t=document.getElementById("projects");if(!t)return;const e=t.querySelector(".section-title");e&&(e.textContent=this.t("projects.title")),["ecommerce","dataViz","mobileApp"].forEach((e,n)=>{const r=t.querySelectorAll(".project-card")[n];if(r){const t=r.querySelector(".project-title"),n=r.querySelector(".project-description");t&&(t.textContent=this.t(`projects.${e}.title`)),n&&(n.textContent=this.t(`projects.${e}.description`))}})}updateAboutPage(){const t=document.getElementById("about");if(!t)return;const e=t.querySelector(".section-title");e&&(e.textContent=this.t("about.title"));const n=t.querySelector(".about-sidebar h3");n&&(n.textContent=this.t("about.skills"));const r=t.querySelector(".about-main h3");r&&(r.textContent=this.t("about.basicInfo"))}updateFuturePage(){const t=document.getElementById("future");if(!t)return;const e=t.querySelector(".section-title");e&&(e.textContent=this.t("future.title"));const n=t.querySelectorAll(".tab-btn"),r=["career","life","learning","interests"];n.forEach((t,e)=>{r[e]&&(t.textContent=this.t(`future.tabs.${r[e]}`))})}updateContactPage(){const t=document.getElementById("contact");if(!t)return;const e=t.querySelector(".section-title");e&&(e.textContent=this.t("contact.title"));const n=t.querySelector(".contact-intro");n&&(n.textContent=this.t("contact.intro"))}updateLangButtons(){document.querySelectorAll(".lang-btn").forEach(t=>{t.getAttribute("data-lang")===this.currentLang?t.classList.add("active"):t.classList.remove("active")})}init(){const t=localStorage.getItem("preferredLang");t&&this.translations[t]&&(this.currentLang=t),this.updatePageContent(),this.updateLangButtons()}};window.i18n=t;