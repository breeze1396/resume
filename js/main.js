class e{constructor(){this.currentPage="home",this.mobileMenuOpen=!1}init(){this.setupEventListeners(),this.showPage("home"),i18n.init(),imageLoader.init(),this.setupScrollEffects()}setupEventListeners(){document.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.getAttribute("href").substring(1);this.showPage(o),this.closeMobileMenu()})}),document.querySelector(".logo").addEventListener("click",()=>{this.showPage("home"),this.closeMobileMenu()});const e=document.querySelector(".mobile-menu-btn");e&&e.addEventListener("click",()=>{this.toggleMobileMenu()}),document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-lang");i18n.setLanguage(t)})}),document.querySelectorAll(".project-card").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-project");this.showProjectModal(t)})}),document.querySelectorAll(".modal-close").forEach(e=>{e.addEventListener("click",()=>{this.closeModal()})}),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",t=>{t.target===e&&this.closeModal()})}),document.querySelectorAll(".cta-button").forEach(e=>{e.addEventListener("click",t=>{const o=e.getAttribute("href");if(o&&o.startsWith("#")){t.preventDefault();const e=o.substring(1);this.showPage(e)}})}),document.querySelectorAll(".tab-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-tab");this.switchFutureTab(t)})}),document.querySelectorAll(".download-btn").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.getAttribute("data-lang")||"ch";this.downloadPDF(o)})}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(this.closeModal(),this.closeMobileMenu())})}showPage(e){document.querySelectorAll(".page").forEach(e=>{e.classList.remove("active")});const t=document.getElementById(e);t&&(t.classList.add("active"),this.currentPage=e,this.updateActiveNav(e),window.scrollTo({top:0,behavior:"smooth"}),this.initPage(e))}updateActiveNav(e){document.querySelectorAll(".nav-link").forEach(t=>{t.getAttribute("href")===`#${e}`?t.classList.add("active"):t.classList.remove("active")})}initPage(e){"about"===e&&this.animateSkillBars()}animateSkillBars(){document.querySelectorAll(".skill-progress").forEach(e=>{const t=e.getAttribute("data-width")||e.style.width;e.style.width="0%",setTimeout(()=>{e.style.width=t},300)})}toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen;const e=document.querySelector(".mobile-menu");e&&e.classList.toggle("active",this.mobileMenuOpen)}closeMobileMenu(){this.mobileMenuOpen=!1;const e=document.querySelector(".mobile-menu");e&&e.classList.remove("active")}showProjectModal(e){const t=document.querySelector(`#${e}-modal`);if(t){t.classList.add("active"),document.body.style.overflow="hidden";const e=t.querySelector("img");if(e&&e.hasAttribute("data-highres-src")){const t=e.getAttribute("data-highres-src");e.src=t}}}closeModal(){document.querySelectorAll(".modal").forEach(e=>{e.classList.remove("active")}),document.body.style.overflow=""}switchFutureTab(e){document.querySelectorAll(".tab-btn").forEach(t=>{t.getAttribute("data-tab")===e?t.classList.add("active"):t.classList.remove("active")}),document.querySelectorAll(".timeline-content").forEach(t=>{t.getAttribute("data-tab")===e?t.classList.add("active"):t.classList.remove("active")})}downloadPDF(e){const t={ch:"pdf/bre_resume_ch.pdf",en:"pdf/bre_resume_ch_en.pdf",ja:"pdf/bre_resume_ch_jp.pdf"},o=t[e]||t.ch,c=document.createElement("a");c.href=o,c.download=`resume_${e}.pdf`,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}setupScrollEffects(){let e=0;const t=document.querySelector(".navbar");window.addEventListener("scroll",()=>{const o=window.pageYOffset||document.documentElement.scrollTop;o>100?(t.style.background="rgba(15, 23, 42, 0.98)",t.style.boxShadow="0 4px 20px rgba(0, 0, 0, 0.2)"):(t.style.background="rgba(15, 23, 42, 0.95)",t.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)"),e=o},{passive:!0})}}document.addEventListener("DOMContentLoaded",()=>{(new e).init()});